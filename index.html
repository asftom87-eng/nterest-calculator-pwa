<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ æ´»å­˜åˆ©ç‡åˆ†å±¤è¨ˆç®—æ©Ÿ (æœ€çµ‚ç´”æ‰‹å‹•ç‰ˆ)</title>
    <style>
        /* CSS æ¨£å¼ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .calculator-container { background-color: #ffffff; padding: 40px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); width: 100%; max-width: 450px; }
        h1 { text-align: center; color: #007bff; margin-bottom: 30px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
        input[type="number"], input[type="date"], select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
        
        .rate-inputs { border: 1px solid #91d5ff; padding: 15px; border-radius: 8px; margin-top: 15px; background-color: #e6f7ff; }
        .rate-inputs h3 { margin-top: 0; color: #007bff; }
        
        .date-input-group { display: flex; justify-content: space-between; gap: 10px; }
        .date-input-group > div { flex-grow: 1; }
        
        .result-area { margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee; }
        .result-area h2 { color: #333; margin-top: 0; margin-bottom: 15px; border-bottom: 2px solid #007bff; padding-bottom: 5px; }
        .result-area strong { color: #007bff; }
        #totalInterest, #futureValue { font-size: 20px; font-weight: bold; color: #28a745; }
        hr { border: none; border-top: 1px dashed #ccc; margin: 15px 0; }
        .note { font-size: 14px; color: #888; margin-top: 10px; text-align: center; }
    </style>
</head>
<title>ğŸŒŸ æ´»å­˜åˆ©ç‡åˆ†å±¤è¨ˆç®—æ©Ÿ (PWA)</title>
    <link rel="manifest" href="/manifest.json"> 
    <meta name="theme-color" content="#007bff">
    <script>
        // PWA æ ¸å¿ƒè¨­å®š 3: è¨»å†Š Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    // Registration was successful
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    // registration failed :(
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</head>
<body>

    <div class="calculator-container">
        <h1>ğŸ’° æ´»å­˜åˆ©ç‡åˆ†å±¤è¨ˆç®—æ©Ÿ</h1>
        <p class="note">æ‰€æœ‰åƒæ•¸è«‹ä¾æ“šéŠ€è¡Œå…¬å‘Šæ‰‹å‹•è¼¸å…¥ã€‚</p>

        <div class="input-group">
            <label for="principal">ç¸½å­˜æ¬¾æœ¬é‡‘ (Total Principal):</label>
            <input type="number" id="principal" value="200000" min="0" oninput="calculateTieredInterest()">
        </div>
        
        <div class="rate-inputs">
            <h3>åˆ†å±¤åˆ©ç‡è¨­å®š (å¹´åˆ©ç‡ %)</h3>
            
            <div class="input-group">
                <label for="limit">å„ªæƒ é«˜åˆ©é™é¡ (Limit for Preferential Rate):</label>
                <input type="number" id="limit" value="100000" min="0" step="1000" oninput="calculateTieredInterest()">
            </div>
            
            <div class="input-group">
                <label for="preferentialRate">å„ªæƒ é™é¡å…§å¹´åˆ©ç‡ (%):</label>
                <input type="number" id="preferentialRate" value="3.0" min="0" step="0.01" oninput="calculateTieredInterest()">
            </div>
            
            <div class="input-group">
                <label for="generalRate">è¶…éé™é¡ä¸€èˆ¬å¹´åˆ©ç‡ (%):</label>
                <input type="number" id="generalRate" value="0.825" min="0" step="0.01" oninput="calculateTieredInterest()">
            </div>
        </div>
        
        <div class="input-group">
            <label>å­˜æ¬¾æœŸé™:</label>
            <div class="date-input-group">
                <div>
                    <label for="startDate">èµ·å§‹æ—¥æœŸ:</label>
                    <input type="date" id="startDate" value="" onchange="calculateTieredInterest()">
                </div>
                <div>
                    <label for="endDate">çµæŸæ—¥æœŸ:</label>
                    <input type="date" id="endDate" value="" onchange="calculateTieredInterest()">
                </div>
            </div>
            <p style="font-size: 14px; margin-top: 8px;">
                ç¸½å¤©æ•¸: <span id="displayDays">0</span> å¤© (ç´„ <span id="displayYears">0</span> å¹´)
            </p>
        </div>
        
        <div class="input-group">
            <label for="compound">è¨ˆç®—æ–¹å¼:</label>
            <select id="compound" onchange="calculateTieredInterest()">
                <option value="simple">å–®åˆ© (Simple Interest)</option>
                <option value="monthly_compound">è¤‡åˆ© (æ¯æœˆ21æ—¥çµç®—æ»¾å…¥)</option> </select>
        </div>
        
        <div id="result-area" class="result-area">
            <h2>ğŸ“ è¨ˆç®—çµæœ (ä»¥å¯¦éš›å¤©æ•¸è¨ˆç®—)</h2>
            <p><strong>å„ªæƒ é™é¡å…§æœ¬é‡‘:</strong> <span id="principalHigh">NT$ 0.00</span> (@ <span id="rateHigh">0.0%</span>)</p>
            <p><strong>ä¸€èˆ¬åˆ©ç‡æœ¬é‡‘:</strong> <span id="principalGeneral">NT$ 0.00</span> (@ <span id="rateGeneral">0.0%</span>)</p>
            <hr>
            
            <p><strong>æ¯æœˆå¹³å‡åˆ©æ¯ (Monthly Interest):</strong> <span id="monthlyInterest">NT$ 0.00</span></p>
            
            <p><strong>ç¸½åˆ©æ¯ (Total Interest):</strong> <span id="totalInterest">NT$ 0.00</span></p>
            
            <p><strong>æœ¬åˆ©å’Œ (Future Value):</strong> <span id="futureValue">NT$ 0.00</span></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>